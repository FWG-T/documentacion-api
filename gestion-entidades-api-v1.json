{"openapi":"3.0.0","paths":{"/request/create-contractor":{"post":{"operationId":"RequestController_createContractorQueue","summary":"Crear contratista","description":"Endpoint para crear y actualizar un contratista","parameters":[{"name":"x-consumer-custom-id","required":true,"in":"header","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Datos para crear un contratista","content":{"multipart/form-data":{"schema":{"allOf":[{"$ref":"#/components/schemas/ContractorDataDTO"},{"$ref":"#/components/schemas/ContractorMetadataArrayDTO"},{"properties":{"files":{"type":"array","description":"Los nombres y cantidad de los archivos debe coincidir en la metadata","items":{"type":"string","format":"binary"}}}}]}}}},"responses":{"201":{"description":"Solicitud de creacion de contratista recibido","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"400":{"description":"Solicitud incorrecta","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"401":{"description":"No autorizado"}},"tags":["Peticiones de creacion y actualizacion de contratistas, vehiculos y staff"]}},"/request/create-vehicle/{contractorRut}":{"post":{"operationId":"RequestController_createVehicleQueue","summary":"Crear vehículo","description":"Endpoint para crear y actualizar un vehiculo","parameters":[{"name":"x-consumer-custom-id","required":true,"in":"header","schema":{"type":"string"}},{"name":"contractorRut","required":true,"in":"path","description":"RUT del contratista asociado a la empresa","schema":{}}],"requestBody":{"required":true,"description":"Datos para crear un contratista","content":{"multipart/form-data":{"schema":{"allOf":[{"$ref":"#/components/schemas/VehicleDataDto"},{"$ref":"#/components/schemas/VehicleMetadataArrayDTO"},{"properties":{"files":{"type":"array","description":"Los nombres y cantidad de los archivos debe coincidir en la metadata","items":{"type":"string","format":"binary"}}}}]}}}},"responses":{"201":{"description":"Solicitud de creacion de vehiculo recibido","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"400":{"description":"Solicitud incorrecta","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"401":{"description":"No autorizado"}},"tags":["Peticiones de creacion y actualizacion de contratistas, vehiculos y staff"]}},"/request/create-staff/{contractorRut}":{"post":{"operationId":"RequestController_createStaffQueue","summary":"Crear personal","description":"Endpoint para crear y actualizar un personal","parameters":[{"name":"x-consumer-custom-id","required":true,"in":"header","schema":{"type":"string"}},{"name":"contractorRut","required":true,"in":"path","description":"RUT del contratista asociado a la empresa","schema":{}}],"requestBody":{"required":true,"description":"Datos para crear un contratista","content":{"multipart/form-data":{"schema":{"allOf":[{"$ref":"#/components/schemas/StaffDataDto"},{"$ref":"#/components/schemas/StaffMetadataArrayDTO"},{"properties":{"files":{"type":"array","description":"Los nombres y cantidad de los archivos debe coincidir en la metadata","items":{"type":"string","format":"binary"}}}}]}}}},"responses":{"201":{"description":"Solicitud de creacion de personal recibido","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"400":{"description":"Solicitud incorrecta","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"401":{"description":"No autorizado"}},"tags":["Peticiones de creacion y actualizacion de contratistas, vehiculos y staff"]}}},"info":{"title":"MS Validation","description":"Uso del microservicio Validation para enviar peticiones de creacion y modificacion de contratistas, vehiculos y staff","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"ContractorMetadataDTO":{"type":"object","properties":{"documentType":{"type":"number"},"documentEntity":{"type":"number"},"demand":{"type":"number"},"side":{"type":"string","description":"Side puede ser: \"frontal or \"trasera\". Solo para carnet de identidad"}},"required":["documentType","documentEntity","demand","side"]},"ContractorMetadataArrayDTO":{"type":"object","properties":{"metadata":{"description":"La metadata es requerida solo si se envía archivos","type":"array","items":{"$ref":"#/components/schemas/ContractorMetadataDTO"}}}},"ContractorDTO":{"type":"object","properties":{"contractorTypeId":{"type":"number"},"rut":{"type":"string"},"businessName":{"type":"string"},"serviceTypeId":{"type":"number"},"reviewStartDate":{"type":"string"},"reviewEndDate":{"type":"string"},"reviewCompaniesId":{"type":"array","items":{"type":"string"}}},"required":["contractorTypeId","rut","businessName","serviceTypeId","reviewStartDate","reviewEndDate","reviewCompaniesId"]},"ContractorPartnerDTO":{"type":"object","properties":{"rut":{"type":"string"},"name":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}},"required":["rut","name","lastName","email","phoneNumber"]},"ContractorDataDTO":{"type":"object","properties":{"contractor":{"description":"Cuando se actualiza un contratista, solo se envia el rut del contratista a actualizar","allOf":[{"$ref":"#/components/schemas/ContractorDTO"}]},"contractorPartner":{"description":"Propiedad para asignar los datos del contratista partner","allOf":[{"$ref":"#/components/schemas/ContractorPartnerDTO"}]}},"required":["contractor","contractorPartner"]},"VehicleMetadataDto":{"type":"object","properties":{"documentType":{"type":"number"},"documentEntity":{"type":"number"},"patent":{"type":"string"},"fileName":{"type":"string"}},"required":["documentType","documentEntity","patent","fileName"]},"VehicleMetadataArrayDTO":{"type":"object","properties":{"metadata":{"description":"La metadata es requerida solo si se envía archivos","type":"array","items":{"$ref":"#/components/schemas/VehicleMetadataDto"}}}},"VehicleDto":{"type":"object","properties":{"vehicleType":{"type":"number"},"patent":{"type":"string"}},"required":["vehicleType","patent"]},"CoupledDto":{"type":"object","properties":{"coupledType":{"type":"number"},"patent":{"type":"string"}},"required":["coupledType","patent"]},"VehicleDataDto":{"type":"object","properties":{"vehicle":{"description":"Cuando se actualiza un vehiculo, solo se envia la patente del vehiculo a actualizar","allOf":[{"$ref":"#/components/schemas/VehicleDto"}]},"coupled":{"description":"La propiedad coupled es requerida solo al crear un acoplado","allOf":[{"$ref":"#/components/schemas/CoupledDto"}]}},"required":["vehicle"]},"StaffMetadataDto":{"type":"object","properties":{"documentType":{"type":"number"},"documentEntity":{"type":"number"},"side":{"type":"string","description":"Side puede ser: \"frontal or \"trasera\". Solo para carnet de identidad"},"fileName":{"type":"string"}},"required":["documentType","documentEntity","fileName"]},"StaffMetadataArrayDTO":{"type":"object","properties":{"metadata":{"description":"La metadata es requerida solo si se envía archivos","type":"array","items":{"$ref":"#/components/schemas/StaffMetadataDto"}}}},"StaffDto":{"type":"object","properties":{"name":{"type":"string"},"lastName":{"type":"string"},"rut":{"type":"string"},"staffType":{"type":"number"}},"required":["name","lastName","rut","staffType"]},"VehicleStaffDto":{"type":"object","properties":{"staffRut":{"type":"string"},"vehiclePatents":{"type":"array","items":{"type":"string"}}},"required":["staffRut","vehiclePatents"]},"StaffDataDto":{"type":"object","properties":{"staff":{"description":"Cuando se actualiza un personal, solo se envia el rut del personal a actualizar","type":"array","items":{"$ref":"#/components/schemas/StaffDto"}},"vehicleStaff":{"description":"La propiedad vehicleStaff es requerida solo si asocia un staff a un vehiculo","type":"array","items":{"$ref":"#/components/schemas/VehicleStaffDto"}}},"required":["staff"]}}}}